<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì£¼ì°¨ ì°¨ëŸ‰ í™•ì¸ê¸° (ì‚¬ì§„ í¬í•¨)</title>

<style>
  body {
    font-family: "Pretendard", sans-serif;
    background: #f9fafb;
    text-align: center;
    padding: 20px;
  }
  h2 { color: #2b4eff; }

  input {
    font-size: 2em;
    padding: 10px;
    width: 220px;
    margin: 10px;
    border-radius: 10px;
    border: 1px solid #ccc;
    text-align: center;
  }

  button {
    font-size: 1.4em;
    padding: 10px 18px;
    border: none;
    background: #2b4eff;
    color: white;
    border-radius: 10px;
    margin: 5px;
  }
  button:active { background: #1a36b0; }

  #status {
    margin-top: 15px;
    font-weight: bold;
  }

  table {
    margin: 20px auto;
    border-collapse: collapse;
    width: 95%;
    background: white;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  }

  th, td {
    border: 1px solid #ddd;
    padding: 12px;
    font-size: 1.1em;
  }

  th {
    background: #f1f3f6;
  }

  img.car-photo {
    width: 130px;
    border-radius: 10px;
    cursor: pointer;
  }
</style>
</head>

<body>
<h2>ğŸš— ì£¼ì°¨ ì°¨ëŸ‰ í™•ì¸ê¸° (ì‚¬ì§„)</h2>

<input type="text" id="carInput" placeholder="4ìë¦¬ ë²ˆí˜¸">
<br>
<button onclick="checkCar()">ì¡°íšŒ</button>
<button onclick="startVoice()">ğŸ™ ìŒì„±ì¡°íšŒ</button>

<div id="status"></div>

<table id="resultTable" style="display:none;">
  <thead>
    <tr>
      <th>ì°¨ëŸ‰ì‚¬ì§„</th>
      <th>ë²ˆí˜¸</th>
      <th>ìƒ‰ìƒ</th>
      <th>ì°¨ì¢…</th>
      <th>ì£¼ì°¨ìŠ¤í‹°ì»¤</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
/* ===============================
   ì°¨ëŸ‰ ë°ì´í„°
   ì‚¬ì§„ ì—†ìœ¼ë©´ default.jpg ì‚¬ìš©
================================ */
const carData = [
  { ë²ˆí˜¸: "0114", ìƒ‰ìƒ: "í°ìƒ‰", ì°¨ì¢…: "ë ˆì´", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í™©ìƒ‰)", ì‚¬ì§„: "images/0114.jpg" },
  { ë²ˆí˜¸: "0136", ìƒ‰ìƒ: "í°ìƒ‰", ì°¨ì¢…: "ì•„ìš°ë””", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í™©ìƒ‰)", ì‚¬ì§„: "images/0136.jpg" },
  { ë²ˆí˜¸: "0159", ìƒ‰ìƒ: "ê²€ì •", ì°¨ì¢…: "í¬ë£¨ì¦ˆ", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ì—†ìŒ", ì‚¬ì§„: "images/default.jpg" }
];

/* ===============================
   ì°¨ëŸ‰ ì¡°íšŒ
================================ */
function checkCar() {
  const input = document.getElementById("carInput").value.trim();
  const status = document.getElementById("status");
  const table = document.getElementById("resultTable");
  const tbody = table.querySelector("tbody");

  tbody.innerHTML = "";

  if (input.length !== 4) {
    status.innerText = "âš  4ìë¦¬ ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”";
    table.style.display = "none";
    return;
  }

  const car = carData.find(c => c.ë²ˆí˜¸ === input);

  if (!car) {
    status.innerText = "âŒ ë“±ë¡ë˜ì§€ ì•Šì€ ì°¨ëŸ‰ì…ë‹ˆë‹¤";
    table.style.display = "none";
    return;
  }

  status.innerText = "âœ… ì°¨ëŸ‰ í™•ì¸ ì™„ë£Œ";
  table.style.display = "table";

  tbody.innerHTML = `
    <tr>
      <td>
        <img src="${car.ì‚¬ì§„ || 'images/default.jpg'}"
             class="car-photo"
             onclick="window.open(this.src)">
      </td>
      <td>${car.ë²ˆí˜¸}</td>
      <td>${car.ìƒ‰ìƒ}</td>
      <td>${car.ì°¨ì¢…}</td>
      <td>${car.ì£¼ì°¨ìŠ¤í‹°ì»¤}</td>
    </tr>
  `;
}

/* ===============================
   ìŒì„± ì¸ì‹ (Chrome)
================================ */
function startVoice() {
  if (!('webkitSpeechRecognition' in window)) {
    alert("ì´ ë¸Œë¼ìš°ì €ëŠ” ìŒì„±ì¸ì‹ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤");
    return;
  }

  const recognition = new webkitSpeechRecognition();
  recognition.lang = "ko-KR";
  recognition.interimResults = false;

  recognition.onresult = function(event) {
    const text = event.results[0][0].transcript;
    const number = text.replace(/[^0-9]/g, "").slice(-4);
    document.getElementById("carInput").value = number;
    checkCar();
  };

  recognition.start();
}
</script>
</body>
</html>