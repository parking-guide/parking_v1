<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì£¼ì°¨ ì°¨ëŸ‰ í™•ì¸ê¸°</title>
<style>
  body {
    font-family: "Pretendard", sans-serif;
    background: #f9fafb;
    text-align: center;
    padding: 20px;
  }
  h2 { color: #2b4eff; }
  input {
    font-size: 2.0em;
    padding: 10px;
    width: 200px;
    margin: 10px;
    border-radius: 10px;
    border: 1px solid #ccc;
    text-align: center;
  }
  button {
    font-size: 1.8em;
    padding: 10px 20px;
    border: none;
    background: #2b4eff;
    color: white;
    border-radius: 10px;
    margin: 5px; 
  }
  button:active { background: #1a36b0; }
  table {
    margin: 20px auto;
    border-collapse: collapse;
    width: 90%;
    max-width: 600px;
    background: white;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  }
  th, td {
    border: 1px solid #ddd;
    padding: 15px;
    word-break: keep-all; 
  }
  th { background: #f1f3f6; }
  #status { 
    margin-top: 15px; 
    font-weight: bold; 
    color: #333;
    min-height: 1.5em;
  }
</style>
</head>
<body>
  <h2>ğŸ¤ ì£¼ì°¨ ì°¨ëŸ‰ í™•ì¸ê¸°</h2>

  <input type="text" id="carInput" placeholder="4ìë¦¬ ë²ˆí˜¸ ì…ë ¥">
  <div>
    <button onclick="checkCar()">ì¡°íšŒ</button>
    <button onclick="startVoice()">ğŸ™ï¸ ìŒì„±ìœ¼ë¡œ ì¡°íšŒ</button>
  </div>
  

  <div id="status"></div>

  <table id="resultTable" style="display:none;">
    <thead>
      <tr><th>ë²ˆí˜¸</th><th>ìƒ‰ìƒ</th><th>ì°¨ì¢…</th><th>ì£¼ì°¨ìŠ¤í‹°ì»¤</th></tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
  // ğŸ”¹ ì°¨ëŸ‰ ë°ì´í„° (HTML ì•ˆì—ì„œ ì§ì ‘ ìˆ˜ì •/ì¶”ê°€ ê°€ëŠ¥)
  const carData = [
    { ë²ˆí˜¸: "0114", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í™©ìƒ‰)", ìƒ‰ìƒ: "í°ìƒ‰", ì°¨ì¢…: "ë ˆì´ " },
  { ë²ˆí˜¸: "0136", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í™©ìƒ‰)", ìƒ‰ìƒ: "í°ìƒ‰", ì°¨ì¢…: "C36 ì•„ìš°ë””" },
  { ë²ˆí˜¸: "0159", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í™©ìƒ‰)", ìƒ‰ìƒ: "ë² ì´ì§€", ì°¨ì¢…: "ëª¨ë‹" },
  { ë²ˆí˜¸: "0211", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ì—†ìŒ", ìƒ‰ìƒ: "ê²€ì •ê³„ì—´", ì°¨ì¢…: "í¬ë£¨ì¦ˆ" },
  { ë²ˆí˜¸: "0212", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í™©ìƒ‰)", ìƒ‰ìƒ: "ê²€ì •ê³„ì—´", ì°¨ì¢…: "í¬ë£¨ì¦ˆ" },
  { ë²ˆí˜¸: "0227", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í™©ìƒ‰)", ìƒ‰ìƒ: "í°ìƒ‰", ì°¨ì¢…: "K7" },
  { ë²ˆí˜¸: "0285", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í™©ìƒ‰)", ìƒ‰ìƒ: "ê²€ì •ê³„ì—´", ì°¨ì¢…: "ì„íŒ”ë¼ì‰ë³´ë ˆ" },
  { ë²ˆí˜¸: "0307", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í™©ìƒ‰)", ìƒ‰ìƒ: "ê²€ì •ê³„ì—´", ì°¨ì¢…: "ì œë„¤ì‹œìŠ¤" },
  { ë²ˆí˜¸: "0430", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í™©ìƒ‰)", ìƒ‰ìƒ: "í°ìƒ‰", ì°¨ì¢…: "ì†Œë‚˜íƒ€" },
  { ë²ˆí˜¸: "0448", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í™©ìƒ‰)", ìƒ‰ìƒ: "ê²€ì •ê³„ì—´", ì°¨ì¢…: "ë‹ˆë¡œ" },
  { ë²ˆí˜¸: "0460", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ì—†ìŒ", ìƒ‰ìƒ: "ê²€ì •ê³„ì—´", ì°¨ì¢…: "K7" },
  { ë²ˆí˜¸: "0476", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í™©ìƒ‰)", ìƒ‰ìƒ: "ê²€ì •ê³„ì—´", ì°¨ì¢…: "ë ˆì´" },
  { ë²ˆí˜¸: "0520", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í™©ìƒ‰)", ìƒ‰ìƒ: "ê²€ì •ê³„ì—´", ì°¨ì¢…: "ì¹´ë‹ˆë°œ" },
  { ë²ˆí˜¸: "0539", ì£¼ì°¨ìŠ¤í‹°ì»¤: "êµíšŒì°¨ëŸ‰", ìƒ‰ìƒ: "ì€_íšŒìƒ‰", ì°¨ì¢…: "ìŠ¤íƒ€ë ‰ìŠ¤" },
  { ë²ˆí˜¸: "0547", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ì—†ìŒ(í™•ì¸)", ìƒ‰ìƒ: "í°ìƒ‰", ì°¨ì¢…: "ëª¨ë‹" },
  { ë²ˆí˜¸: "0560", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í™©ìƒ‰)", ìƒ‰ìƒ: "ê²€ì •ê³„ì—´", ì°¨ì¢…: "ì˜ë Œí† " },
  { ë²ˆí˜¸: "0563", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í™©ìƒ‰)", ìƒ‰ìƒ: "í°ìƒ‰", ì°¨ì¢…: "ìŠ¤íŒŒí¬" },
  { ë²ˆí˜¸: "0585", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í™©ìƒ‰)", ìƒ‰ìƒ: "ê²€ì •ê³„ì—´", ì°¨ì¢…: "ì†Œë Œí† " },
  { ë²ˆí˜¸: "0627", ì£¼ì°¨ìŠ¤í‹°ì»¤: "í™•ì¸í•„ìš”", ìƒ‰ìƒ: "ê²€ì •ê³„ì—´", ì°¨ì¢…: "ë””ìŠ¤ì»¤ë²„ë¦¬" },
  { ë²ˆí˜¸: "0636", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í™©ìƒ‰)", ìƒ‰ìƒ: "ì€_íšŒìƒ‰", ì°¨ì¢…: "SM5" },
  { ë²ˆí˜¸: "0661", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í™©ìƒ‰)", ìƒ‰ìƒ: "ê²€ì •ê³„ì—´", ì°¨ì¢…: "SM6" },
  { ë²ˆí˜¸: "0702", ì£¼ì°¨ìŠ¤í‹°ì»¤: "í™•ì¸í•„ìš”", ìƒ‰ìƒ: "í°ìƒ‰", ì°¨ì¢…: "k3" },
  { ë²ˆí˜¸: "0757", ì£¼ì°¨ìŠ¤í‹°ì»¤: "í™•ì¸í•„ìš”", ìƒ‰ìƒ: "í°ìƒ‰", ì°¨ì¢…: "k3" },
  { ë²ˆí˜¸: "0759", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í™©ìƒ‰)", ìƒ‰ìƒ: "ì²­ìƒ‰ê³„ì—´", ì°¨ì¢…: "ì†Œë‚˜íƒ€" },
  { ë²ˆí˜¸: "0767", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ì—†ìŒ", ìƒ‰ìƒ: "ì€_íšŒìƒ‰", ì°¨ì¢…: "Benz" },
  { ë²ˆí˜¸: "0841", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í™©ìƒ‰)", ìƒ‰ìƒ: "í°ìƒ‰", ì°¨ì¢…: "ì•„ì´ì˜¤ë‹‰" },
  { ë²ˆí˜¸: "0892", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í°ìƒ‰)", ìƒ‰ìƒ: "ê²€ì •ê³„ì—´", ì°¨ì¢…: "í‹°ë³¼ë¦¬" },
  { ë²ˆí˜¸: "0905", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í™©ìƒ‰)", ìƒ‰ìƒ: "ê²€ì •ê³„ì—´", ì°¨ì¢…: "ë§ë¦¬ë¶€" },
  { ë²ˆí˜¸: "0982", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í™©ìƒ‰)", ìƒ‰ìƒ: "ì€_íšŒìƒ‰", ì°¨ì¢…: "íˆ¬ì‚°" },
  { ë²ˆí˜¸: "1045", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í™©ìƒ‰)", ìƒ‰ìƒ: "ê²€ì •ê³„ì—´", ì°¨ì¢…: "G90" },
  { ë²ˆí˜¸: "1130", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í™©ìƒ‰)", ìƒ‰ìƒ: "ê²€ì •ê³„ì—´", ì°¨ì¢…: "íˆ¬ì‚°" },
  { ë²ˆí˜¸: "1138", ì£¼ì°¨ìŠ¤í‹°ì»¤: "í™•ì¸í•„ìš”", ìƒ‰ìƒ: "í°ìƒ‰", ì°¨ì¢…: "ê·¸ëœì €" },
  { ë²ˆí˜¸: "1178", ì£¼ì°¨ìŠ¤í‹°ì»¤: "ìˆìŒ(í™©ìƒ‰)", ìƒ‰ìƒ: "í°ìƒ‰", ì°¨ì¢…: "ë„¥ì†Œ" },
  ];

  const inputEl = document.getElementById("carInput");
  const statusEl = document.getElementById("status");
  const table = document.getElementById("resultTable");
  const tbody = table.querySelector("tbody");
  
  let recognition; // ìŒì„± ì¸ì‹ ê°ì²´

  inputEl.addEventListener("keydown", (e) => {
    if (e.key === "Enter") checkCar();
  });

  // ğŸ”¹ ìŒì„±ìœ¼ë¡œ ë§í•˜ê¸° í•¨ìˆ˜ (ìŠ¤ë§ˆíŠ¸í°ì—ì„œë„ ì¡°íšŒ ê²°ê³¼ë¥¼ ì½ì–´ì¤ë‹ˆë‹¤)
  function speak(text) {
    // ìŒì„± ì¶œë ¥ ì „ì— í˜„ì¬ ì¶œë ¥ ì¤‘ì¸ ìŒì„± ì·¨ì†Œ
    if (speechSynthesis.speaking) {
      speechSynthesis.cancel();
    }
    const utter = new SpeechSynthesisUtterance(text);
    utter.lang = "ko-KR";
    speechSynthesis.speak(utter);
  }

  // ğŸ”¹ ì°¨ëŸ‰ ê²€ìƒ‰ í•¨ìˆ˜
  function checkCar() {
    const num = inputEl.value.replace(/\D/g, "").padStart(4, "0");
    
    // ì¸ì‹ ê°ì²´ê°€ í™œì„±í™”ëœ ìƒíƒœë¼ë©´, ì—¬ê¸°ì„œ ëª…í™•í•˜ê²Œ ì¤‘ì§€ ë° ì´ˆê¸°í™”
    if (recognition) {
        recognition.stop();
        recognition = null;
    }

    if (!num || num === "0000") {
      speak("ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ê±°ë‚˜ ë§ì”€í•´ì£¼ì„¸ìš”.");
      return;
    }

    const found = carData.find(c => c.ë²ˆí˜¸ === num);
    if (found) {
      showResult(found);
      // âœ… ì¡°íšŒ ê²°ê³¼ ìŒì„± ëŒ€ë‹µ
      speak(`${num}ë²ˆ ì°¨ëŸ‰ì€ ${found.ìƒ‰ìƒ} ${found.ì°¨ì¢…}, ì£¼ì°¨ìŠ¤í‹°ì»¤ ${found.ì£¼ì°¨ìŠ¤í‹°ì»¤} ì…ë‹ˆë‹¤.`);
    } else {
      statusEl.textContent = `ğŸš« ${num}ë²ˆ ì°¨ëŸ‰ì€ ë“±ë¡ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.`;
      table.style.display = "none";
      // âœ… ë“±ë¡ ì•ˆ ë¨ ìŒì„± ëŒ€ë‹µ
      speak(`${num}ë²ˆ ì°¨ëŸ‰ì€ ë“±ë¡ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.`);
    }
  }

  // ğŸ”¹ ê²°ê³¼ í‘œì‹œ í•¨ìˆ˜
  function showResult(data) {
    tbody.innerHTML = `
      <tr>
        <td>${data.ë²ˆí˜¸}</td>
        <td>${data.ìƒ‰ìƒ}</td>
        <td>${data.ì°¨ì¢…}</td>
        <td>${data.ì£¼ì°¨ìŠ¤í‹°ì»¤}</td>
      </tr>
    `;
    table.style.display = "table";
    statusEl.textContent = "âœ… ì°¨ëŸ‰ ì •ë³´ê°€ í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.";
  }


  // ğŸ”¹ ìŒì„± ì¸ì‹ ì‹œì‘ í•¨ìˆ˜
  function startVoice() {
    // ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€
    if (recognition) {
        statusEl.textContent = "ğŸ™ï¸ ì´ë¯¸ ìŒì„± ì¸ì‹ ì¤‘ì…ë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.";
        return; 
    }
    
    // API ì§€ì› í™•ì¸
    if (!("webkitSpeechRecognition" in window)) {
      alert("ì´ ë¸Œë¼ìš°ì €ëŠ” ìŒì„±ì¸ì‹ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\ní¬ë¡¬ ë¸Œë¼ìš°ì €ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.");
      return;
    }

    // â­ ì¤‘ìš”: ìŒì„± ì¸ì‹ ì‹œì‘ ì „, í˜¹ì‹œ ë‚¨ì•„ìˆëŠ” TTS ì·¨ì†Œ
    if (speechSynthesis.speaking) {
      speechSynthesis.cancel();
    }
    
    recognition = new webkitSpeechRecognition();
    recognition.lang = "ko-KR";
    recognition.continuous = false;
    recognition.interimResults = false; 
    recognition.maxAlternatives = 1;

    recognition.onstart = function() {
        statusEl.textContent = "ğŸ™ï¸ ë²ˆí˜¸ë¥¼ ë§ì”€í•´ì£¼ì„¸ìš”...";
    };
    
    // ì¸ì‹ ì„±ê³µ
    recognition.onresult = function(event) {
      const transcript = event.results[0][0].transcript;
      const num = transcript.replace(/[^0-9]/g, ""); 
      
      // onresult ë°œìƒ ì‹œ, ê°ì²´ ì •ë¦¬
      if (recognition) {
        recognition.stop();
        recognition = null;
      }

      if (num.length >= 2 && num.length <= 4) {
          inputEl.value = num;
          checkCar();
      } else {
          statusEl.textContent = `âš ï¸ ì¸ì‹ëœ ë‚´ìš©("${transcript}")ì—ì„œ ë²ˆí˜¸ ì¶”ì¶œ ì‹¤íŒ¨. ë‹¤ì‹œ 'ìŒì„±ìœ¼ë¡œ ì¡°íšŒ' ë²„íŠ¼ì„ ëˆŒëŸ¬ ì‹œë„í•´ì£¼ì„¸ìš”.`;
          speak("ë²ˆí˜¸ë¥¼ ì •í™•íˆ ë§ì”€í•´ì£¼ì„¸ìš”. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
      }
    };

    // ì¸ì‹ì´ ëë‚¬ì„ ë•Œ
    recognition.onend = function() {
        // onresultë‚˜ ì˜¤ë¥˜ ì²˜ë¦¬ì—ì„œ ì •ë¦¬ë˜ì§€ ì•Šì€ ê²½ìš°
        if (recognition) {
             statusEl.textContent = "ìŒì„± ì¸ì‹ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ 'ìŒì„±ìœ¼ë¡œ ì¡°íšŒ' ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.";
             recognition = null; 
        }
    };
    
    // â­â­ ì˜¤ë¥˜ ë°œìƒ ì‹œ ì²˜ë¦¬ ë¡œì§ (ì•ˆë“œë¡œì´ë“œ ì´ìŠˆ ëŒ€ì‘) â­â­
    recognition.onerror = function(event) {
        let errorMsg;
        
        // ì˜¤ë¥˜ ë°œìƒ ì‹œ ê°ì²´ ì´ˆê¸°í™”
        if (recognition) {
            recognition.stop();
            recognition = null; 
        }

        switch(event.error) {
            case 'not-allowed':
                // â­ ì•ˆë“œë¡œì´ë“œì—ì„œ ì´ ì˜¤ë¥˜ê°€ ë‚˜ë©´ HTTPS í™˜ê²½ì´ ì•„ë‹ˆê±°ë‚˜, ë¸Œë¼ìš°ì € ë§ˆì´í¬ ê¶Œí•œì´ êº¼ì§„ ê²½ìš°ì…ë‹ˆë‹¤.
                errorMsg = "âŒ ë§ˆì´í¬ ê¶Œí•œì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤. **HTTPS í™˜ê²½**ì—ì„œ ì ‘ì†í–ˆëŠ”ì§€, ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ ë§ˆì´í¬ ì‚¬ìš©ì„ í—ˆìš©í–ˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.";
                speak(errorMsg);
                break;
            case 'no-speech':
                errorMsg = "âŒ ìŒì„±ì„ ì¸ì‹í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ 'ìŒì„±ìœ¼ë¡œ ì¡°íšŒ' ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.";
                speak("ìŒì„±ì„ ì¸ì‹í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
                break;
            case 'service-not-allowed':
                // â­ ëª¨ë°”ì¼ í™˜ê²½ì—ì„œ í”íˆ ë°œìƒí•˜ë©°, HTTPS ë¯¸ì ìš©ì´ ì›ì¸ì¸ ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.
                errorMsg = "âŒ ë³´ì•ˆ ë¬¸ì œë¡œ ì„œë¹„ìŠ¤ ì‚¬ìš©ì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤. **HTTPS í™˜ê²½**ì—ì„œ ì ‘ì†í–ˆëŠ”ì§€ ë°˜ë“œì‹œ í™•ì¸í•´ì£¼ì„¸ìš”.";
                speak(errorMsg);
                break;
            default:
                errorMsg = `âŒ ìŒì„± ì¸ì‹ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. (ì˜¤ë¥˜ ì½”ë“œ: ${event.error}). ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.`;
                speak(errorMsg);
                break;
        }

        statusEl.textContent = errorMsg;
    };
    
    try {
        recognition.start();
    } catch(e) {
        statusEl.textContent = "âŒ ìŒì„± ì¸ì‹ ì‹œì‘ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: " + e.message + " ë¸Œë¼ìš°ì €ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.";
        recognition = null;
    }
  }
  </script>
</body>
</html>